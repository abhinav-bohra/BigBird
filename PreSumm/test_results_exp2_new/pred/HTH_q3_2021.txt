further , the portfolio of loans that are currently under active deferral plan build a $ 17 million from $ 76 million at the end of the second quarter of ' 21 .
primelending continues to recruit productive loan officers and has hired 127 year to date bringing total loan officer headcount to 1,314 .
the result of the improvements at the client level equated to a net release of credit reserves of $ 5 million during the third quarter .
the $ 74 million in shares repurchased are part of the $ 150 million share authorization the board granted earlier this year .
i 'm moving to page 7 .
the net impact of these changes resulted in an allowance for credit losses for the period ending september 30 of $ 109.5 million or 1.45 % of total loans .
this week , the hilltop board of directors authorized an additional increase to the stock repurchase program of $ 50 million , bringing the total authorization to $ 200 million .
as a result of dividends and share repurchase efforts , hilltop has returned $ 153 million in capital to shareholders year - to - date .
as it relates to gain on sale margins , we noted in our key driver table in the lower right of the page the gain on sale margins on loans fell 18 basis points versus the prior quarter .
excluding mortgage warehouse and ppp loans , the bank 's acl to end - of - period loans hfi ratio equated to 1.74 % .
total average bank loans declined $ 252 million or 4 % versus q2 2021 as ppp balances ran off .
this was a good quarter for the public finance business in particular with revenues up $ 12 million from prior year , predominantly from a few larger deals .
these loans had an average yield of 2.95 % and average fico and ltv of 776 % and 64 % , respectively .
we continue to expect that full year 2021 average total loan growth excluding ppp loans will be within a range of zero to 3 % .
revenues within the structured finance business decreased by $ 26 million from last year as the overall mortgage market has declined from the astonishing levels in 2020 .
at 09/30 , hilltop maintained $ 243 million of broker deposits that have a blended yield of 33 basis points .
